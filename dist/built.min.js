!function(){"use strict";function a(a){a.when("/home",{controller:"HomeCtrl",controllerAs:"home",templateUrl:"templates/HomePage.html"}).when("/:filter",{controller:"HomeCtrl",controllerAs:"home",templateUrl:"templates/HomePage.html"}).otherwise({redirectTo:"/home"})}function b(a,b){b.load(),a.$on("$routeChangeStart",function(a,b,c){})}angular.module("App").config(a).run(b),a.$inject=["$routeProvider"],b.$inject=["$rootScope","api"]}(),function(){"use strict";function a(a,b,c){function d(a,b){var c=new RegExp("^("+b.join("|")+")$");return c.test(a)?!0:!1}function e(){f.person.name=""}var f=this,g={allows:["power","rich","genius"],current:a.filter||!1};d(g.current,g.allows)||b.url("/home"),f.person={name:"",options:{power:"power"===g.current,rich:"rich"===g.current,genius:"genius"===g.current}},f.filter={},g.current&&(f.filter.options={},f.filter.options[g.current]=!0),c.get().then(function(a){f.persons=a}),f.add=function(a){c.add(angular.copy(a)).then(function(a){g.current&&!a.options[g.current]&&b.url("/home"),e()})},f["delete"]=function(a){c["delete"](a).then(function(a){console.log(a)})},f.update=function(){c.save().then(function(a){console.log("updated")})}}angular.module("App.controllers").controller("HomeCtrl",a),a.$inject=["$routeParams","$location","api"]}(),function(){"use strict";function a(a,b){var c=this;a.get().then(function(a){c.persons=a}),b.$watch(function(){return c.persons},function(){c.total=c.persons.length,c.power=a.getFilteredBy("power").length,c.rich=a.getFilteredBy("rich").length,c.genius=a.getFilteredBy("genius").length},!0)}angular.module("App.controllers").controller("SidebarCtrl",a),a.$inject=["api","$scope"]}(),function(){"use strict";function a(a,b){function c(){return JSON.parse(localStorage.getItem(f)||"[]")}function d(a){localStorage.setItem(f,JSON.stringify(a))}var e={},f="persons";return e.persons=[],e.load=function(){var a=b.defer();return angular.copy(c(),e.persons),a.resolve(e.persons),a.promise},e.get=function(a){var c,d=b.defer();return a&&a.filteredBy&&(c=e.getFilteredBy(a.filteredBy)),d.resolve(c||e.persons),d.promise},e.add=function(a){var c=b.defer();return e.persons.push(a),d(e.persons),c.resolve(a),c.promise},e["delete"]=function(a){var c=b.defer();return e.persons.splice(e.persons.indexOf(a),1),d(e.persons),c.resolve(e.persons),c.promise},e.save=function(){var a=b.defer();return d(e.persons),a.resolve(e.persons),a.promise},e.getFilteredBy=function(a){return e.persons.filter(function(b,c,d){return b.options[a]})},e}angular.module("App.services").factory("api",a),a.$inject=["$http","$q"]}();